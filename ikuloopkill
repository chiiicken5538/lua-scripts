
--[[
getgenv().alk_settings = {
    host = 1234567890,
    host_fps = 60,
    alt_fps = 3,
}

loadstring(game:HttpGet("https://raw.githubusercontent.com/chiiicken5538/lua-scripts/main/ikuloopkill"))()
]]
------------
------------


function log(str)
    print("[LoopAutoKill] " .. str)
end

if not game:IsLoaded() then
    log("Waiting for Roblox to load...")
    game.Loaded:Wait()
end

if game.PlaceId ~= 2788229376 then
    log("You are not in DaHood! Script will not be executed.")
    error("You are not in DaHood! Script will not be executed.")
    return
end



game:GetService("Players").LocalPlayer.Idled:Connect(function(time)
    game:GetService("VirtualUser"):Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    task.wait(1)
    game:GetService("VirtualUser"):Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)


log("Loaded!")


local player = game:GetService("Players").LocalPlayer


function killPlayer(name)

    local target = game:GetService("Players"):FindFirstChild(name)

    local batPath = game:GetService("Workspace").Ignored.Shop["[Bat] - $258"]

    if player.Backpack:FindFirstChild("[Bat]") == nil and player.Backpack:FindFirstChild("[Bat]") == nil then
        player.Character.HumanoidRootPart.CFrame = batPath.Head.CFrame
        repeat 
            fireclickdetector(batPath.ClickDetector, 11)
            task.wait()
        until player.Backpack:FindFirstChild("[Bat]") ~= nil or player.Character:FindFirstChild("[Bat]") ~= nil
    end

    if not player.Character:FindFirstChild("[Bat]") then
        player.Backpack:FindFirstChild("[Bat]").Parent = player.Character
    end

    repeat 
        player.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame
        player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        task.wait(2)
        player.Character:FindFirstChild("[Bat]"):Activate()
        task.wait(3.5)
    until target.Character.BodyEffects:FindFirstChild("K.O").Value


    repeat 
        player.Character.HumanoidRootPart.CFrame = target.Character.UpperTorso.CFrame
        game:GetService("ReplicatedStorage").MainEvent:FireServer("Stomp")
        task.wait()
    until target.Character.BodyEffects.Dead.Value

    log("Finished killing " .. name)
end


-- Player Character overrides
local playerAttributeOverride = function()
    for k, v in pairs(game:GetService("Players"):GetChildren()) do


        for k1, v1 in pairs(v.Character:GetChildren()) do
            if v1:IsA("Pants") or v1:IsA("Shirt") or v1:IsA("Accessory") then
                v1:Destroy()
            end
            if v1:IsA("MeshPart") then
                v1.Color = Color3.new(255, 255, 255)
                v1.MeshId = 0
            end
        end

        for k2, v2 in pairs(v:GetChildren()) do

            print(v2)
            if v2.Name == "PlayerGui" then
                for k3, v3 in pairs(v2.MainScreenGui:GetChildren()) do
                    if not ignore_items__MAINSCREENGUI[v.Name] then
                        v3:Destroy()
                    end    
                end
            end

        end
    end

end



--------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------


if game:GetService("Players").LocalPlayer.UserId == getgenv().alk_settings.host then
    log("This is host.")

    setfpscap(getgenv().alk_settings.host_fps)
        
    if not game:GetService("Players").LocalPlayer:FindFirstChild("DataFolder") then
        log("Waiting for DaHood to load...")
    end

    repeat task.wait()
    until game:GetService("Players").LocalPlayer:FindFirstChild("DataFolder") ~= nil

    while task.wait() do
        pcall(function()
            for k, v in pairs(game:GetService("Players"):GetChildren()) do
                if v.UserId ~= getgenv().alk_settings.host then 
                    if not v.Character.BodyEffects:FindFirstChild("K.O").Value then
                        killPlayer(v.Name)
                    end
                end
            end
        end)
    end


else
    log("This is an alt.")

        
    game:GetService("RunService"):Set3dRenderingEnabled(false)

        
    local altscreen_screengui = Instance.new("ScreenGui")
    local altscreen_frame = Instance.new("Frame")
    local altscreen_text = Instance.new("TextLabel")

    
    generatedChars = {}

    for i=1,12 do
        generatedChars[i] = string.char(math.random(32,126))
    end

    hiddenName = table.concat(generatedChars)

    altscreen_screengui.Name = hiddenName
    altscreen_screengui.Parent = game:GetService("CoreGui")

    altscreen_frame.Name = hiddenName
    altscreen_frame.Parent = game:GetService("CoreGui"):FindFirstChild(hiddenName)
    altscreen_frame.BackgroundColor3 = Color3.fromRGB(12, 12, 12)
    altscreen_frame.BorderColor3 = Color3.fromRGB(12, 12, 12)
    altscreen_frame.BorderSizePixel = 100
    altscreen_frame.Position = UDim2.new(0, 1, 0, 1)
    altscreen_frame.Size = UDim2.new(1, 0, 1, 0)


    altscreen_text.Name = hiddenName
    altscreen_text.Parent = altscreen_frame
    altscreen_text.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    altscreen_text.BackgroundTransparency = 1.000
    altscreen_text.Position = UDim2.new(0.43553561, 0, 0.460150361, 0)
    altscreen_text.Size = UDim2.new(0, 200, 0, 50)
    altscreen_text.Font = Enum.Font.GothamBold
    altscreen_text.TextColor3 = Color3.fromRGB(255, 255, 255)
    altscreen_text.TextSize = 18.000
    altscreen_text.Text = "[ iku - loopkill ]\n" .. game.Players.LocalPlayer.Name .. "\n  \ndiscord.gg/iku"

    setfpscap(tonumber(getgenv().alk_settings.alt_fps))

    if not game:GetService("Workspace"):FindFirstChild("SpawnSaver") then
        for k, v in pairs(game:GetService("Workspace").Ignored.Spawn:GetChildren()) do
            spawnSaverPart = Instance.new("Part")
            spawnSaverPart.Parent = game:GetService("Workspace")
            spawnSaverPart.Name = "SpawnSaver"
            spawnSaverPart.Anchored = true
            spawnSaverPart.CFrame = v.CFrame
            spawnSaverPart.Size = Vector3.new(20,1,20)
            spawnSaverPart.CanCollide = true
        end    
    end

    delete_items__workspace = {
        ["Cashiers"] = true,
        ["Bush"] = true,
        ["FireParts"] = true,
        ["Vehicles"] = true,
        ["Lights"] = true,
        ["AnzuAdPlacement"] = true,
        ["ForwardPortal"] = true,
        ["FerrisWheel"] = true,
        ["AirSounds"] = true,
    }
    
    ignore_items__IGNORED = {
        ["Spawn"] = true,
    }
    
    ignore_items__MAINSCREENGUI = {}
    
    ignore_items__playerattributes = { ["Playerscripts"] = true }
    
    for k, v in pairs(game:GetService("Workspace"):GetChildren()) do
        if delete_items__workspace[v.Name] then
            v:Destroy()
        end
    end
    
    for k, v in pairs(game:GetService("Workspace"):FindFirstChild("Ignored"):GetChildren()) do
        if not ignore_items__IGNORED[v.Name] then
            v:Destroy()
        end
    end
    
    
    for k, v in pairs(game:GetService("StarterGui"):FindFirstChild("MainScreenGui"):GetChildren()) do
        if not ignore_items__MAINSCREENGUI[v.Name] then
            v:Destroy()
        end
    end
    
    
    if game:GetService("Workspace"):FindFirstChild("MAP") ~= nil then
        game:GetService("Workspace"):FindFirstChild("MAP"):Destroy()
    end 
    
    if game:GetService("StarterGui"):FindFirstChild("GoThruGui") ~= nil then
        game:GetService("StarterGui"):FindFirstChild("GoThruGui"):Destroy()
    end 
    
    
    -- Lightningservice overrides
    for k, v in pairs(game:GetService("Lighting"):GetChildren()) do
        v:Destroy()
    end
    
    game:GetService("Lighting").OutdoorAmbient = Color3.new(0,0,0)
    game:GetService("Lighting").FogEnd = 0
    game:GetService("Lighting").FogStart = 0
    game:GetService("Lighting").FogColor = Color3.new(0,0,0)
    game:GetService("Lighting").GlobalShadows = false
    game:GetService("Lighting").GeographicLatitude = 0
    game:GetService("Lighting").Brightness = 0
    
    

    
    
    playerAttributeOverride()
    
    
    UserSettings().GameSettings.MasterVolume = 0

    settings().Rendering.QualityLevel = "Level01"

    settings():GetService("RenderSettings").EagerBulkExecution = false
    workspace.LevelOfDetail = Enum.ModelLevelOfDetail.Disabled


end
